<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Modules Classes Datastore StatementDB PrivateSigningKey PublicSigningKey PublisherId P2PNode MediachainNode × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Classes Classes Datastore StatementDB PrivateSigningKey PublicSigningKey PublisherId P2PNode MediachainNode × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode א The Aleph's diameter was probably little more than an inch, but all space was there, actual and undiminished. Each thing (a mirror's face, let us say) was infinite things, since I distinctly saw it from every angle of the universe¹ Aleph is part of the mediachain project and is an integral component of the Phase II architecture. Aleph provides two main components. First is a client for the HTTP API exposed by concat, the reference go peer implementation. Second is a lightweight peer in its own right. For system-wide Mediachain documentation see https://mediachain.github.io/mediachain-docs. InstallationAleph requires node 6 or greater, and has primarily been tested with 6.5 and above. To globally install a release from npm: npm install --global aleph. This will install the aleph command, which provides a remote query command and an interactive REPL for exploring the mediachain network. It also installs the mcclient command, which you can use to control and interact with a concat node. If you'd prefer to install from the source repository, clone this repo and run npm install, followed by npm link, which will create a mcclient and aleph symlinks that run the latest compiled version of the code. This is very useful during development. If you don't want mcclient or aleph on your path at all, you can just run npm install and execute ./bin/mcclient.js and ./bin/aleph.js directly instead. UsageInstalling the aleph package will install two command line tools: mcclient and aleph. mcclientmcclient is a wrapper around the HTTP API exposed by concat, aleph's heavy-lifting counterpart. mcclient contains several sub-commands, so the general invocation is mcclient [global-options] &lt;command&gt; [command-options]. At the moment, the only global option is --apiUrl or -p, which sets the location of the remote node's HTTP API. By default, mcclient will attempt to connect to a concat node running on localhost at port 9002, which is concat's default listen address for the HTTP API. If you've configured concat to run on a different port or on a remote machine, use the -p flag to pass in a new URL, e.g. mcclient -p http://localhost:5678 id Some useful commands include: id: print the node's peer id and publisher id status: with no arguments, prints the current status (online, offline, or public) set the status with e.g. mcclient status online publish: publish JSON metadata to the node's local store. see mcclient publish --help for more info. statement: retrieve a statement by its id query: run a mediachain query against the node's local store. To see a full list of supported commands, run mcclient --help alephWhile mcclient is a front-end for the golang peer implementation concat, the aleph command provides access to the javascript peer implementation. The two are interoperable, but they do not have feature parity. Most notably, the javascript peer has no local storage for mediachain statements or data objects, so it can't be used to provide mediachain data. However, aleph is useful for interacting with local and remote concat nodes, and for exploring the mediachain network and peer-to-peer architecture. There are currently two aleph subcommands, aleph repl and aleph query aleph replThe aleph repl command provides an interactive Read-Eval-Print-Loop for controlling a javascript mediachain node. When you start the repl, a new peer identity is created and stored in the ~/.mediachain/aleph directory. You can override that default with the --identityPath flag. The repl provides a javascript prompt, and a global node object. This is an instance of the MediachainNode class, which implements the peer-to-peer protocols. The repl can be used to remotely interact with another node using the mediachain protocol. For example: א &gt; node.ping('/ip4/54.205.184.122/tcp/9001/p2p/QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ') trueThe long string above is a multiaddr, which is a format for representing and combining addresses for multiple network protocols. The string above is for the peer-to-peer node with id QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ, located at the IP4 address 54.205.184.122, on tcp port 9001. The /p2p/ protocol identifier is not yet part of the multiaddr standard, but it is in the works as a replacement for the /ipfs/ identifier, and we've adopted it in anticipation of it being integrated into the standard soon. Let's make our addresses a bit simpler by connecting to the Mediachain Labs directory server: א &gt; node.setDirectory('/ip4/52.7.126.237/tcp/9000/p2p/QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6')Now we can just use the peer identifier portion of the address, and the directory will provide us with the full address behind the scenes: א &gt; node.ping('QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ') trueYou can also provide the directory server address at the command line when launching the repl: $ aleph repl --dir /ip4/52.7.126.237/tcp/9000/p2p/QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6This will set the directory address on startup, and avoid the need for the node.setDirectory call. Pairing a remote nodeSince the aleph repl is at its most useful when interacting with a remote node, there's built-in support for &quot;pairing&quot; the javascript aleph node to a remote node (most likely a concat node). To do so, just provide the --remotePeer flag when launching the repl, and give it a multiaddr where the peer is located: $ aleph repl --remotePeer /ip4/54.205.184.122/tcp/9001/p2p/QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQNow, in addition to the global node object, you also have a remote object that represents the remote peer. א &gt; remote.query('SELECT * FROM images.dpla LIMIT 1') [ { value: { simple: [Object] } } ]The query result is printed at the repl in condensed form. To examine it further, we can use the &quot;magic&quot; _ variable, which holds the result of the last repl command. Assign it to a new variable, and we can interact with it more easily: var result = _ console.dir(result[0].value.simple) { stmt: { id: '4XTTM4K8sqTb7xYviJJcRDJ5W6TpQxMoJ7GtBstTALgh5wzGm:1478267497:1', publisher: '4XTTM4K8sqTb7xYviJJcRDJ5W6TpQxMoJ7GtBstTALgh5wzGm', namespace: 'images.dpla', body: { simple: { object: 'QmeFJSTPKSEiNqebxZvYcduWH8UBmxqNq724gHEQnxV5D1', refs: [ 'dpla_1ff6b36174426026847c8f8ca216ffa9' ], tags: [], deps: [ 'QmYGRQYmWC3BAtTAi88mFb7GVeFsUKGM4nm25SBUB9vfc9' ] } }, timestamp: 1478267497, signature: Buffer [...] } }To also fetch the data objects associated with each result, use remote.queryWithData instead of remote.query. aleph queryaleph query --remotePeer &lt;peerAddress&gt; &lt;queryString&gt; will execute a query on a remote peer using the peer-to-peer query protocol. This is very similar to the mcclient query command, with the exception that the --remotePeer argument is not optional, since the local aleph node does not have a local datastore. Mediachain records are composed of two main components: statements and objects. Objects are the core metadata objects that represent a given artwork, person, or other resource. A statement is a mediachain-specific record that contextualizes an object within the mediachain network. For example, the statement includes the namespace in which the record was published, the ids of the publisher, the well-known identifiers attached to the record, etc. By default, the aleph query command will only show the statements that match the query results. However, it's common that you'll want to see the content of the objects themselves. Use the --includeData or -i flag to dereference the objects for each statement in the query results. For example: $ aleph query --remotePeer /ip4/54.205.184.122/tcp/9001/ipfs/QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ --includeData 'SELECT * FROM images.dpla LIMIT 1'{ &quot;simple&quot;: { &quot;stmt&quot;: { &quot;id&quot;: &quot;4XTTM4K8sqTb7xYviJJcRDJ5W6TpQxMoJ7GtBstTALgh5wzGm:1478267497:1&quot;, &quot;publisher&quot;: &quot;4XTTM4K8sqTb7xYviJJcRDJ5W6TpQxMoJ7GtBstTALgh5wzGm&quot;, &quot;namespace&quot;: &quot;images.dpla&quot;, &quot;body&quot;: { &quot;simple&quot;: { &quot;object&quot;: { &quot;key&quot;: &quot;QmeFJSTPKSEiNqebxZvYcduWH8UBmxqNq724gHEQnxV5D1&quot;, &quot;data&quot;: { &quot;schema&quot;: { &quot;/&quot;: &quot;QmYGRQYmWC3BAtTAi88mFb7GVeFsUKGM4nm25SBUB9vfc9&quot; }, &quot;data&quot;: { &quot;artist_names&quot;: [ [ &quot;Meredith L. Clausen&quot; ] ], &quot;aspect_ratio&quot;: 0.7166666666666667, &quot;attribution&quot;: [ { &quot;name&quot;: &quot;Meredith L. Clausen&quot; } ], &quot;omitted_for_bevity&quot;: &quot;...&quot; } } }, &quot;refs&quot;: [ &quot;dpla_1ff6b36174426026847c8f8ca216ffa9&quot; ], &quot;tags&quot;: [], &quot;deps&quot;: [ &quot;QmYGRQYmWC3BAtTAi88mFb7GVeFsUKGM4nm25SBUB9vfc9&quot; ] } }, &quot;timestamp&quot;: 1478267497, &quot;signature&quot;: &quot;yDhPpc/RIkW3+sHjl/cB00j3jurqMsDdb/tUyVMUfa6I4EnNiYdSqasxWTiRGtsaT2M/xX++RgRNQQ/97x8IDA==&quot; } } }Development and contributionThanks! We welcome all contributions of ideas, bug reports, code, and whatever else you'd like to send our way. Please take a look at our contributing guidelines -- they are very friendly. Code structureThe code lives in src, and is organized into a few main subdirectories: client/api contains the RestClient class, which provides a Promise-based wrapper around concat's HTTP API client/cli contains the code for the mcclient command line app, which uses RestClient for all of its functionality. The cli is powered by the yargs argument parser, and each subcommand is contained in its own module in client/cli/commands peer contains the javascript implementation of mediachain peer-to-peer nodes. There are two main node types, a DirectoryNode that corresponds to concat's mcdir command, and a MediachainNode that corresponds to concat's mcnode. Both use the LibP2PNode class (defined in src/peer/libp2p_node.js) for low-level peer-to-peer networking. protobuf contains protocol-buffer definitions for messages exchanged between nodes, and is kept in sync with concat. × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_common_util.html":{"id":"module-aleph_common_util.html","title":"Module: aleph/common/util","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/common/util handy utility things that seem broadly useful Methods &lt;inner&gt; b58MultihashForBuffer(buf) Returns base58-encoded sha256 multihash for the given Buffer Parameters: Name Type Description buf Buffer a Buffer you want to hash Returns: a base58-encoded multihash string Type string &lt;inner&gt; consumeStream(stream) Read a stream until it ends, returning its contents as a string. Parameters: Name Type Description stream stream.Readable Returns: Type Promise &lt;inner&gt; flatMap(array, f) Given an array of Ts, apply function f of T =&gt; Array&lt;U&gt;, to each element, returning a flattened array of Us Parameters: Name Type Description array Array.&lt;*&gt; f function Returns: Type Array.&lt;*&gt; &lt;inner&gt; isB58Multihash(str) Returns true if str is a valid base58-encoded multihash Parameters: Name Type Description str string Returns: Type boolean &lt;inner&gt; println(output) Print output to stdout and append a newline. Always use this instead of console.log for non-debug output! console.log keeps a strong reference to whatever you pass in, which can result in memory leaks for long-running processes. Parameters: Name Type Description output string &lt;inner&gt; printlnErr(output) Print output to stderr and append a newline. Use if you don't want console.error to keep a strong reference to whatever you pass in. Parameters: Name Type Description output string &lt;inner&gt; promiseHash(hash) ES6+ implementation of rsvp's Promise.hash method: https://github.com/tildeio/rsvp.js/#hash-of-promises Parameters: Name Type Description hash object a JS object whose values may be Promises Returns: a JS object with the same keys as hash, whose values are the resolved values of that key's promise. If any promise fails, the whole thing will fail. Type object Example promiseHash({ posts: API.fetchPosts(userId), // returns Promise&lt;Array&lt;Post&gt;&gt; user: API.fetchUser(userId) // returns Promise&lt;User&gt; }) .then(results =&gt; { const { posts, // resolved Array&lt;Post&gt; user // resolved User } = results console.log(`User ${user.name} has ${posts.length} posts`) }) &lt;inner&gt; promiseTimeout(timeout, promise) Reject promise if it doesn't complete within timeout milliseconds Parameters: Name Type Description timeout number milliseconds to wait before rejecting promise Promise.&lt;*&gt; a promise that you want to set a timeout for Returns: a Promise that will resolve to the value of promise, unless the timeout is exceeded &lt;inner&gt; setEquals(a, b) Returns true if Set a and Set b contain the same members, using strict (shallow) equality (the === operator) Parameters: Name Type Description a Set b Set Returns: Type boolean &lt;inner&gt; setUnion(sets) Given any number of Sets, return a new Set that contains all elements combined. Parameters: Name Type Argument Description sets Set &lt;repeatable&gt; Returns: the union of a and b Type Set &lt;inner&gt; stringifyNestedBuffers(obj) Returns a clone of obj with all Buffer objects replaced with their base64-encoded string equivalents Parameters: Name Type Description obj object Returns: Type object &lt;inner&gt; writeln(output, destination) Print output to the destination stream and append a newline. Parameters: Name Type Description output string destination stream.Writable | tty.WriteStream × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_metadata_schema.html":{"id":"module-aleph_metadata_schema.html","title":"Module: aleph/metadata/schema","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/metadata/schema Tools for manipulating and validating &quot;self-describing&quot; schemas. Methods &lt;inner&gt; isSchemaDescription(obj) Check if the given object is a valid SchemaDescription Parameters: Name Type Description obj Returns: Type boolean &lt;inner&gt; isSchemaReference(obj) Check if the given object is a valid IPLD link. Parameters: Name Type Description obj Object Returns: Type boolean &lt;inner&gt; isSelfDescribingRecord(obj) Check if the given object is a valid SelfDescribingRecord Parameters: Name Type Description obj Object Returns: Type boolean &lt;inner&gt; loadSelfDescribingSchema(filename) Load a self-describing schema from a file, validating it before returning Parameters: Name Type Description filename Returns: Type SelfDescribingSchema &lt;inner&gt; schemaDescriptionIsCompatible(a, b) Check whether the two given SchemaDescriptions can be considered compatible. Parameters: Name Type Description a b Returns: Type boolean &lt;inner&gt; schemaDescriptionIsEqual(a, b) Check whether the two given SchemaDescriptions are identical (including version) Parameters: Name Type Description a SchemaDescription b SchemaDescription Returns: Type boolean &lt;inner&gt; schemaDescriptionIsSameSchema(a, b) Check whether the two given SchemaDescriptions are the same (ignoring version) Parameters: Name Type Description a SchemaDescription b SchemaDescription Returns: Type boolean &lt;inner&gt; schemaDescriptionToWKI(desc) Returns a URI-like string for a given SchemaDescription Parameters: Name Type Description desc SchemaDescription Returns: Type string &lt;inner&gt; validate(schema, payload) Validate the given payload object using the provided schema Parameters: Name Type Description schema SelfDescribingSchema payload SelfDescribingRecord | Object Returns: Type ValidationResult &lt;inner&gt; validateSelfDescribingSchema(schemaObject) Validate that the given schemaObject is in fact a valid json-schema, with a SchemaDescription. Parameters: Name Type Description schemaObject a self-describing json schema object Throws: if schemaObject is not a valid json-schema, or if it lacks required self-description properties Returns: the original object, with a flow typecast for fuzzy good feelings Type Definitions SchemaDescription human-readable identifiers for a schema, including semantic version this will be contained in the schema itself (under the self field) Properties: Name Type Description vendor string A string that identifies the creator of the schema, e.g. 'io.mediachain' or 'org.moma' name string A name that indicates what kind of object the schema is for. e.g. 'image' or 'blogPost'. Should be unique per-vendor. version string A SchemaVer version string. format string Currently only 'jsonschema' is supported. SchemaReference An IPLD link object, whose string value is the b58-encoded multihash of a schema Properties: Name Type Description / string The base58-encoded multihash of a CBOR-encoded schema object. SelfDescribingRecord A wrapper object that contains a data payload object, and a SchemaReference which identifies a schema that can validate the data. Properties: Name Type Description schema SchemaReference An IPLD link object that links to a self-describing schema object. data Object Any JS object that fits the linked schema SelfDescribingSchema A valid JSONSchema that includes a self field with identifying information. Properties: Name Type Description self SchemaDescription Identifies the schema by vendor, name, version and format. ValidationResult Returned by metadata/schema.validate Properties: Name Type Argument Description success boolean True if validation succeeds, false for validation failure If Error &lt;nullable&gt; validation fails, will contain an Error object. Undefined on success. × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_datastore.html":{"id":"module-aleph_peer_datastore.html","title":"Module: aleph/peer/datastore","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/datastore Classes Datastore × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_datastore-Datastore.html":{"id":"module-aleph_peer_datastore-Datastore.html","title":"Class: Datastore","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: Datastore aleph/peer/datastore~ Datastore A content-addressed datastore used by MediachainNode to store data objects. Objects are keyed by the base58-encoded multihash string of their content. Plain JS objects may be stored, in which case they will be serialized to CBOR, and the key will be the hash of the encoded object. Currently only supports in-memory storage. new Datastore() Methods get(key, opts) Fetches an object by its key, returning either the raw Buffer for the key, or a deserialized JS object. Parameters: Name Type Description key opts If opts.returnRawBuffer is true, will not attempt to deserialize data objects from CBOR. Returns: If opts.returnRawBuffer is true, or if a given value can't be deserialized, resolves to the raw Buffer associated with the given key. If opts.returnRawBuffer is false or not present, will attempt to deserialize objects from CBOR. If deserialization fails, resolves to the raw buffer. Will fail with an Error if no object exists for the given key, or if a low-level error occurs. &quot;object not found&quot; errors will have a .notFound property, which can be used to distinguish them from low-level errors. Type Promise.&lt;(Object|Buffer)&gt; has(key) Check if the datastore has an object for the given key. Parameters: Name Type Description key Returns: Resolves to true if the object exists, false otherwise. Fails with an Error if a low-level failure occurs. Type Promise.&lt;boolean&gt; put(value) Add a Buffer of binary data or a JS object that can be encoded to CBOR. Parameters: Name Type Description value Returns: resolves to a base58-encoded multihash string, which encodes the sha256 hash of the object's content. If value is a JS object, it will be serialized to CBOR before being hashed and stored. Type Promise.&lt;string&gt; × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_db.html":{"id":"module-aleph_peer_db.html","title":"Module: aleph/peer/db","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/db Classes StatementDB × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_db-StatementDB.html":{"id":"module-aleph_peer_db-StatementDB.html","title":"Class: StatementDB","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: StatementDB aleph/peer/db~ StatementDB A database for mediachain Statements. Used by MediachainNode for locally storing statements, either created locally or merged from a remote node. Currently defaults to transient (temporary file-backed) storage. new StatementDB() Methods get(id) Get a statement from the DB using its id field. Parameters: Name Type Description id The id string field for a Statement Returns: Resolves to the Statement object on success, or rejects with an Error if the statement can't be found, or an error occurs while fetching it. Type Promise.&lt;Statement&gt; getByNamespace(ns) Get all the statements that are in the given namespace. The '*' wildcard can be used to fetch all statements, or those matching a given prefix. Parameters: Name Type Description ns Returns: Type Promise.&lt;Array.&lt;Statement&gt;&gt; Example db.getByNamespace('*') .then(statements =&gt; { // statements contains all statements in the db }) db.getByNamespace('museums.*') .then(statements =&gt; { // statements will have all `museums.` namespaces, // e.g. `'museums.moma.*'`, `'museums.tate.*'`, etc. }) getByWKI(wki) Get all statements that refer to the given &quot;wki&quot; (Well-Known-Identifier) in the refs field of the statement body. Parameters: Name Type Description wki Returns: Resolves to an array of Statement objects (may be empty). Rejects with an Error if there's a DB failure while fetching. Type Promise.&lt;Array.&lt;Statement&gt;&gt; put(stmt) Add a Statement object to the DB. Parameters: Name Type Description stmt Returns: Resolves with no value on success, or rejects with an Error if something fails. Type Promise.&lt;void&gt; sqlDB() Accessor for the underlying sql DB (via knex query builder). Use this instead of directly accessing the _db instance, to ensure that the db migrations are run before accessing the db. Returns: Type * × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_identity.html":{"id":"module-aleph_peer_identity.html","title":"Module: aleph/peer/identity","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/identity Tools for working with libp2p PeerId, PeerInfo objects, cryptographic signatures, and mediachain PublisherId Classes PrivateSigningKey PublicSigningKey PublisherId Methods &lt;inner&gt; generateIdentity() Create a new PeerId based on a newly-generated RSA keypair. Returns: Resolves to a new PeerId object (which includes both public and private keys). Rejects with an Error if key generation fails. Type Promise.&lt;PeerId&gt; &lt;inner&gt; inflateMultiaddr(multiaddrString) Convert a multiaddr string to a PeerInfo object that can be used to locate a peer. The multiaddrString must contain either the /ipfs/ or /p2p/ protocols, should also include a valid network transport protocol. Parameters: Name Type Description multiaddrString Throws: if multiaddrString is not a valid multiaddr, or if it does not include the /ipfs/ or /p2p/ protocols. Returns: Type PeerInfo Example const peerInfo = inflateMultiaddr('/ip4/10.0.1.2/tcp/9000/p2p/QmTa5gGYN4rhHd3nfSRykGHS95835ym4ZgmwYWKmdDFBEm') // throws (no `/ipfs/` or `/p2p` component) inflateMultiaddr('/ip4/10.0.1.2/tcp/9000') // throws (invalid multiaddr) inflateMultiaddr('foo') &lt;inner&gt; loadIdentity(filePath) Load a PeerId from a binary file (see saveIdentity) Parameters: Name Type Description filePath Filesystem path to load the PeerId from. Returns: Resolves to the loaded PeerId object on success. Rejects with an Error if the file is unreadable or doesn't contain a valid PeerId. Type Promise.&lt;PeerId&gt; &lt;inner&gt; loadOrGenerateIdentity(filePath) Attempt to load a PeerId from the given filePath. If that fails, but the parent directory exists and is writable, generate a new PeerId and save it to filePath. Parameters: Name Type Description filePath Path to load/save the PeerId from/to. Returns: The loaded or generated PeerId object. Type Promise.&lt;PeerId&gt; &lt;inner&gt; saveIdentity(peerId, filePath) Save peerId to a binary file at filePath. Synchronous. Parameters: Name Type Description peerId A PeerId object; must contain a private key. filePath Filesystem path to save the PeerId bytes to. Throws: if peerId does not contain a private key, or the file can't be written. × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_identity-PrivateSigningKey.html":{"id":"module-aleph_peer_identity-PrivateSigningKey.html","title":"Class: PrivateSigningKey","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: PrivateSigningKey aleph/peer/identity~ PrivateSigningKey An object that can sign binary messages, producing a cryptographic signature that can be verified by its corresponding peer/identity.PublicSigningKey new PrivateSigningKey(p2pKey) Create a PrivateSigningKey from an object with the interface used by libp2p-crypto's private key classes. Parameters: Name Type Description p2pKey Members bytes The marshaled binary representation of the key. Methods &lt;static&gt; fromB58String(str) Convert a base58-encoded string private key to a PrivateSigningKey object. Parameters: Name Type Description str A base58-encoded string representation of a marshaled private key. Returns: Resolves to the decoded key, or rejects with an error if str is not a valid base58-encoded private key. Type Promise.&lt;PrivateSigningKey&gt; &lt;static&gt; load(filename) Load a PrivateSigningKey from a binary file. Parameters: Name Type Description filename Returns: Resolves to the loaded key, or rejects with an Error if the file can't be read or doesn't contain a valid key. Type Promise.&lt;PrivateSigningKey&gt; save(filename) Save the key to a file at filepath Parameters: Name Type Description filename Returns: Resolves with no value on sucess, rejects with Error on failure. Type Promise.&lt;void&gt; sign(message) Sign a message and return (a promise of) the signature as a Buffer Parameters: Name Type Description message Returns: Resolves to the message signature, or rejects with Error if signing fails. Type Promise.&lt;Buffer&gt; toB58String() Returns the base58-encoded form of PrivateSigningKey#bytes Returns: Type Buffer × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_identity-PublicSigningKey.html":{"id":"module-aleph_peer_identity-PublicSigningKey.html","title":"Class: PublicSigningKey","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: PublicSigningKey aleph/peer/identity~ PublicSigningKey An object that can verify messages signed by its corresponding private key. new PublicSigningKey(p2pKey) Create a PublicSigningKey from an object with the interface used by libp2p-crypto's public key classes. Parameters: Name Type Description p2pKey Members bytes The marshaled binary representation of the key. Methods &lt;static&gt; fromB58String(str) Convert a base58-encoded string public key to a PublicSigningKey object. Parameters: Name Type Description str A base58-encoded string representation of a marshaled public key. Returns: Resolves to the decoded key, or rejects with an error if str is not a valid base58-encoded public key. Type Promise.&lt;PublicSigningKey&gt; &lt;static&gt; load(filename) Load a PublicSigningKey from a binary file. Parameters: Name Type Description filename Returns: Resolves to the loaded key, or rejects with an Error if the file can't be read or doesn't contain a valid key. Type Promise.&lt;PublicSigningKey&gt; save(filename) Save the key to a file at filepath Parameters: Name Type Description filename Returns: Resolves with no value on sucess, rejects with Error on failure. Type Promise.&lt;void&gt; toB58String() Returns the base58-encoded form of PublicSigningKey#bytes Returns: Type Buffer verify(message, signature) Verify a message signed with this key's private key. Parameters: Name Type Description message signature Returns: Resolves to true if signature is valid, false if invalid. Rejects with an Error if validation completely. Type Promise.&lt;boolean&gt; × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_identity-PublisherId.html":{"id":"module-aleph_peer_identity-PublisherId.html","title":"Class: PublisherId","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: PublisherId aleph/peer/identity~ PublisherId An object used for signing mediachain Statements. new PublisherId() × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_libp2p_node.html":{"id":"module-aleph_peer_libp2p_node.html","title":"Module: aleph/peer/libp2p_node","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/libp2p_node Classes P2PNode × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_libp2p_node-P2PNode.html":{"id":"module-aleph_peer_libp2p_node-P2PNode.html","title":"Class: P2PNode","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: P2PNode aleph/peer/libp2p_node~ P2PNode An object that acts as a LibP2P peer. Provides promise-based interfaces for opening and closing streams to other peers, (see P2PNode#dialByPeerInfo and P2PNode#hangUpByPeerInfo) as well as handling named protocols (see P2PNode#handle). A newly-constructed P2PNode handles a single protocol, the libp2p standard Ping protocol. You can ping another libp2p node (including IPFS nodes) with P2PNode#ping. P2PNodes begin offline, and you must call P2PNode#start to take them online. A PeerInfo object with at least one multiaddr is required when constructing a P2PNode. The node will attempt to listen on all tcp and / or websocket multiaddrs contained in the PeerInfo. The node must be listening on a transport in order to dial with it; if no websocket listen addresses are provided, you won't be able to dial to a peer using websockets. Note that concat nodes only support tcp transports, so that's probably what you want to use. new P2PNode(options) Create a P2PNode. Parameters: Name Type Description options P2PNodeOptions Properties Name Type Argument Default Description peerInfo PeerInfo A libp2p PeerInfo object that identifies a peer. Must contain at least one valid multiaddr for the node to listen on. peerBook PeerBook &lt;optional&gt; An optional PeerBook object to &quot;pre-seed&quot; the node with mappings from PeerId to PeerInfo. disableSecureIO boolean &lt;optional&gt; false If true, disables encryption for streams opened by the node. Use for testing only. timeout number &lt;optional&gt; 10000 Timeout in milliseconds to wait when dialing a peer before erroring out. Default is 10000 (10s) if this option is not present. Methods dialByPeerInfo(peer, protocol) Connect to a peer, opening a stream named by the protocol string. Parameters: Name Type Description peer PeerInfo a PeerInfo object with at least one valid multiaddr for the node you want to dial. protocol string a string identifying a P2P protocol, e.g. &quot;/mediachain/node/query&quot; Returns: resolves to a libp2p Connection, which can be used in a pull-stream. Type Promise.&lt;Connection&gt; handle(protocol, handler) Register a handler for the named protocol. Parameters: Name Type Description protocol string a string identifying a libp2p protocol, e.g. &quot;/mediachain/node/query&quot; handler function a function that will be called with the name of the protocol and a libp2p Connection for incoming streams. hangUpByPeerInfo(peer) Close all open streams to the given peer. Parameters: Name Type Description peer PeerInfo a PeerInfo object identifying a peer with open streams. Returns: resolves with no value on success, or rejects with an Error if one occurs during the hang up operation. Type Promise newAbortable() Creates and returns a pull-stream &quot;abortable&quot;, which can be added to a pull-stream pipeline to allow aborting the stream at any time. All abortables returned from this method will be aborted when the node is stopped Returns: a pull-stream abortable. Call .abort() to cancel a stream that passes through the abortable. Type Abortable Example const abortable = myNode.newAbortable() pull( connectionToOtherNode, abortable, handleLongRunningProcess(), ) // later... abortable.abort() // -&gt; closes the stream ping(peer) Send a libp2p Ping message to the given peer and wait for a response. Parameters: Name Type Description peer PeerInfo a PeerInfo for a peer, with at least one valid multiaddr. Returns: resolves to the latency (in msec), or rejects with an Error if the ping fails. Type Promise.&lt;number&gt; setSecureIOEnabled( [use]) Set whether to use encrypted streams for communication with other nodes. The default is true, and should usually be left alone. Disabling secure IO is useful during unit testing, where security isn't a concern and the overhead of encryption can slow down test execution. Note that a node with secure IO disabled cannot communicate with a node that requires secure IO. Parameters: Name Type Argument Default Description use boolean &lt;optional&gt; true true to enable encryption, false to disable start() Start the node, bringing it online. This causes the node to listen on all available transports, and allows the node to dial out to other peers. Returns: resolves with no value on success, or rejects with an Error if the node can't be started. Type Promise.&lt;void&gt; stop() Stop the node, taking it offline. This will cancel any &quot;abortables&quot; returned from P2PNode#newAbortable, and close any open transports. Note that this may take several seconds using the TCP transport, even if there are no streams open. Returns: resolves with no value on success, or rejects with an Error if the node can't be stopped. Type Promise.&lt;void&gt; unhandle(protocol) Remove any handlers registered for the named protocol Parameters: Name Type Description protocol string a string identifying a previously handled protocol. × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_merge.html":{"id":"module-aleph_peer_merge.html","title":"Module: aleph/peer/merge","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/merge Implementation for merging statements + data from a remote peer. Methods &lt;inner&gt; mergeFromStreams(localNode, queryResultStream, dataConn) &quot;Driver&quot; function for merging statements and data from a remote peer. Used by MediachainNode#merge Parameters: Name Type Description localNode queryResultStream dataConn Returns: Resolves to a MergeResult object on success or partial success (where failure occurs after some statements have been successfully merged). Rejects with an error if merge fails completely. Type Promise.&lt;MergeResult&gt; × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_node.html":{"id":"module-aleph_peer_node.html","title":"Module: aleph/peer/node","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/node Classes MediachainNode × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_node-MediachainNode.html":{"id":"module-aleph_peer_node-MediachainNode.html","title":"Class: MediachainNode","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Class: MediachainNode aleph/peer/node~ MediachainNode An object that represents a Mediachain node. Aleph nodes do not have all the features implemented by concat nodes (https://github.com/mediachain/concat) The idea is that an aleph node (often driven interactively at a REPL) can act as a lightweight &quot;client&quot; node for a concat node. Aleph nodes do have a Datastore and a StatementDB, but both are currently limited to in-memory usage, allowing an aleph node to serve as a &quot;staging area&quot; for data manipulation before sending to a concat node, which will persist the data. new MediachainNode(options) Create a new MediachainNode. A PeerId is required to identify the node. Parameters: Name Type Description options MediachainNodeOptions Properties Name Type Argument Description peerId PeerId A libp2p PeerId object identifying the node. A PeerId is a representation of the node's public key. publisherId PublisherId &lt;optional&gt; A PublisherId object that allows the node to create signed Mediachain statements. If the node does not have a PublisherId, it can still store and transmit statements created and signed by other nodes. dirInfo PeerInfo &lt;optional&gt; The PeerInfo for a directory node, used to lookup public remote peers. If not provided to the constructor, can be set after the fact with MediachainNode#setDirectory listenAddresses Array.&lt;(Multiaddr|string)&gt; &lt;optional&gt; An array of Multiaddr objects or string-encoded multiaddrs that the node will listen on. If not given, the node will listen on a randomly chosen available port on the localhost interface. infoMessage string &lt;optional&gt; A string that will identify the node to the human operators of other peers. Defaults to &quot;(aleph)&quot; datastoreOptions DatastoreOptions &lt;optional&gt; Options to be used for creating the node's object datastore. Defaults to an in-memory key/value store. statementDBOptions StatementDBOptions &lt;optional&gt; Options to be used for creating the node's statement database. Defaults to a DB backed by a temporary file (unique to each node, not persistent across invocations) Example const { generateIdentity } = require('aleph/peer/identity') let node generateIdentity() .then(peerId =&gt; { node = new MediachainNode({peerId}) }) .then(() =&gt; node.start()) .then(() =&gt; node.ping(someOtherNodeId)) Members peerInfo statementCounter Methods data(keys) Looks up the given keys in the node's Datastore, returning the results as an array of DataObjectMsg key/value pair objects. Parameters: Name Type Argument Description keys string &lt;repeatable&gt; One or more base58-encoded multihash keys for the objects to retrieve Returns: Type Promise.&lt;Array.&lt;DataObjectMsg&gt;&gt; dataHandler(protocol, conn) Protocol handler for the mediachain &quot;data&quot; protocol. Accepts requests for data from peers and responds with DataResultMsg objects containing either a DataObjectMsg or StreamErrorMsg Parameters: Name Type Description protocol string conn Connection idHandler(protocol, conn) Protocol handler for mediachain &quot;id&quot; protocol. Responds to incoming &quot;id&quot; requests with the node's PeerId, PublisherId (if any), and info message. Parameters: Name Type Description protocol string conn Connection ingestSimpleStatement(namespace, object, meta) Creates a SignedStatement from the given object and meta-data, signed with the node's PublisherId Will fail if the node does not have a PublisherId Parameters: Name Type Description namespace string object Object meta Object Properties Name Type Argument Default Description refs Array.&lt;string&gt; The &quot;well known identifiers&quot; or external ids for the subject of the statement. deps Array.&lt;string&gt; &lt;optional&gt; [] Multihash references for other data objects the statement depends on, e.g. because they are linked to from inside the main data object. tags Array.&lt;string&gt; &lt;optional&gt; [] String &quot;tags&quot; used to surface keywords for indexing the statement. Returns: The created Statement's id string, which can be used to fetch the statement from the node's statement db. Type Promise.&lt;string&gt; lookup(peerId) Lookup a peer by string-encoded multihash id or PeerId object, returning a PeerInfo object if the peer could be found. Parameters: Name Type Description peerId string | PeerId Either a libp2p PeerId object, or a base58-encoded multihash string that identifies a peer. Returns: Resolves to a PeerInfo object with at least one valid listen address, or to null if the peer could not be located. Rejects with an Error if lookup fails entirely due to e.g. a network failure or invalid input. Type Promise.&lt;?PeerInfo&gt; merge(peer, queryString) Send an MCQL queryString to the remote peer, merging the statements and objects returned into the local datastore and statement db. Parameters: Name Type Description peer PeerInfo | PeerId | string queryString string Returns: Type Promise.&lt;MergeResult&gt; openConnection(peer, protocol) Open a new stream to the given peer using the named protocol Parameters: Name Type Description peer PeerInfo | PeerId | string protocol string A string identifying a libp2p protocol, e.g. &quot;/mediachain/node/query&quot; Returns: Resolves to a libp2p Connection which can be used in a pull-stream. Rejects with an error if the peer cannot be found, or e.g. a network error occurs. Type Promise.&lt;Connection&gt; ping(peer) Send a &quot;ping&quot; message to the given peer, returning the latency between &quot;ping&quot; and &quot;pong&quot; in milliseconds. Parameters: Name Type Description peer PeerInfo | PeerId | string Returns: Latency between sending &quot;ping&quot; and receiving &quot;pong&quot;, in milliseconds. Type Promise.&lt;number&gt; pingHandler(protocol, conn) Protocol handler for mediachain &quot;ping&quot; protocol. Deprecated in favor of libp2p ping protocol, handled by P2PNode class. Parameters: Name Type Description protocol string conn Connection pushStatements(peer, statements) Push the given Statements to the remote peer. Will fail if this node has not been authorized to push to the namespaces referred to in the statements. Parameters: Name Type Description peer PeerInfo | PeerId | string statements Array.&lt;Statement&gt; Returns: Type Promise.&lt;PushEndMsg&gt; pushStatementsById(peer, statementIds) Push the statements with the given statementIds to the remote peer. The identified statements must exist in the node's statement db prior to pushing. Will fail if this node has not been authorized to push to the namespaces referred to in the statements. Parameters: Name Type Description peer PeerInfo | PeerId | string statementIds Array.&lt;string&gt; Returns: Type Promise.&lt;PushEndMsg&gt; putData(vals) Add the given data objects to the node's Datastore. Parameters: Name Type Argument Description vals Array.&lt;(Object|Buffer)&gt; &lt;repeatable&gt; Each value should be either a Buffer full of binary data, or a JS object that can be serialized to CBOR. Returns: Resolves to an array of keys (base58-encoded multihash strings) that can be used to fetch the objects. Type Promise.&lt;Array.&lt;string&gt;&gt; query(queryString) Not implemented! Will someday parse MCQL queries and return results from local statement db. Parameters: Name Type Description queryString string Throws: Always! register() Register the node with the configured directory server (see MediachainNode#setDirectory) Note that the node will send a new registration message as a &quot;heartbeat&quot;, at five minute intervals after the initial registration. If you want to cancel the registration stream, call .abort() on the pull-stream Abortable that the .register() promise resolves to. Returns: resolves with an &quot;abortable&quot; object that you can call .abort() on to cancel the registration heartbeat stream. Type Promise.&lt;Abortable&gt; remoteData(peer, keys) Sends a request for data objects to the remote node, identified by the given keys. Returns an Array of DataResultMsg objects, which contain key/value pairs for each key requested. Parameters: Name Type Description peer PeerInfo | PeerId | string keys Array.&lt;string&gt; Array of base58-encoded multihash strings. See: MediachainNode#remoteDataStream for streaming version. Returns: Type Promise.&lt;Array.&lt;DataResultMsg&gt;&gt; remoteDataStream(peer, keys) Sends a request for data objects to the remote node, identified by the given keys. Returns an pull-stream &quot;source&quot; of DataResultMsg objects, which contain key/value pairs for each key requested. Parameters: Name Type Description peer PeerInfo | PeerId | string keys Array.&lt;string&gt; Array of base58-encoded multihash strings. See: MediachainNode#remoteData for non-streaming version. Returns: A pull-stream &quot;source&quot; that can be used to read DataObjectMsg objects off of the stream. Type Promise.&lt;PullStreamSource.&lt;DataObjectMsg&gt;&gt; remoteNodeInfo(peer) Sends a mediachain &quot;id&quot; request to the remote node. Parameters: Name Type Description peer PeerInfo | PeerId | string Returns: Type Promise.&lt;NodeInfoMsg&gt; remoteQuery(peer, queryString) Sends a MCQL query string to the remote node, and returns an Array of QueryResults. Parameters: Name Type Description peer PeerInfo | PeerId | string queryString string See: MediachainNode#remoteQueryStream for streaming version. Returns: Type Promise.&lt;Array.&lt;QueryResult&gt;&gt; remoteQueryStream(peer, queryString) Sends a MCQL query string to the remote node, and returns a pull-stream &quot;source&quot; that can read query results. Parameters: Name Type Description peer PeerInfo | PeerId | string queryString string See: MediachainNode#remoteQuery for non-streaming version. Returns: Resolves to a pull-stream &quot;source&quot;, which can be used to read query results off of the stream. Type Promise.&lt;PullStreamSource.&lt;QueryResult&gt;&gt; remoteQueryWithData(peer, queryString) Sends a MCQL queryString to the remote peer. For each Statement received, also fetches the associated data objects referred to in the Statement and &quot;expands&quot; the statement body, so that the data objects are available embedded within the Statement. Parameters: Name Type Description peer PeerInfo | PeerId | string queryString string See: MediachainNode#remoteQueryWithData for streaming version. Returns: Resolves to an array of QueryResults (with expanded statements) when the query completes and all results are received. Type Promise.&lt;Array.&lt;QueryResult&gt;&gt; remoteQueryWithDataStream(peer, queryString) Sends a MCQL queryString to the remote peer. For each Statement received, also fetches the associated data objects referred to in the Statement and &quot;expands&quot; the statement body, so that the data objects are available embedded within the Statement. Parameters: Name Type Description peer PeerInfo | PeerId | string queryString string See: MediachainNode#remoteQueryWithData for non-streaming version. Returns: A pull-stream &quot;source&quot; that can be used to read QueryResults (with expanded statements) from the stream. Type Promise.&lt;PullStreamSource.&lt;QueryResult&gt;&gt; setDirectory(dirInfo) Set the location of a mediachain directory server that can be used for peer lookups. Parameters: Name Type Description dirInfo string | PeerInfo Either a PeerInfo object containing at least one valid multiaddr, or a valid string-encoded multiaddr with either the /ipfs/ or /p2p/ protocol components. Example // with a string-encoded multiaddr myNode.setDirectory('/ip4/52.7.126.237/tcp/9000/p2p/QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6') // with a PeerInfo object const PeerId = require('peer-id') const PeerInfo = require('peer-info') const dirId = PeerId.createFromB58String('QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6') const dirInfo = new PeerInfo(dirId) dirInfo.multiaddr.add('/ip4/52.7.126.237/tcp/9000') myNode.setDirectory(dirInfo) setInfoMessage(message) Set the node's &quot;info message&quot;, a short string that identifies the node to humans. The info message is returned by the node in response to a mediachain &quot;id&quot; request. Parameters: Name Type Description message string start() Start the node, bringing it online Returns: A Promise which will resolve with no value on success, or reject with an Error on failure Type Promise.&lt;void&gt; stop() Stop the node, bringing it offline Returns: A Promise which will resolve with no value on success, or reject with an Error on failure Type * | Promise.&lt;void&gt; × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_push.html":{"id":"module-aleph_peer_push.html","title":"Module: aleph/peer/push","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/push Implementation for pushing statements + data to remote peers. Methods &lt;inner&gt; pushStatementsToConn(statements, conn) &quot;Driver&quot; function for pushing statements to a remote peer. The push protocol works like this: We send a PushRequest message that enumerates all the namespaces for each statement we want to push. The peer sends a PushResponse with either a PushAccept, or PushReject message, depending on whether we're sufficiently authorized. If the request is accepted, the peer opens a data stream to our node, to request data objects referenced in the statements. We send a PushValue message for each statement, containing the statement message, followed by a PushValue &quot;end&quot; message. The peer sends a PushEnd message containing counts for statements and objects they merged, plus an error message if an error occured. Parameters: Name Type Description statements an array of Statement messages to push to the peer. Statements must be properly signed, or the remote peer will reject them. conn an open libp2p Connection to the remote peer's /mediachain/node/push handler Returns: Type * × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "},"module-aleph_peer_util.html":{"id":"module-aleph_peer_util.html","title":"Module: aleph/peer/util","body":" Mediachain (aleph) Modules aleph/common/utilaleph/metadata/schemaaleph/peer/datastorealeph/peer/dbaleph/peer/identityaleph/peer/libp2p_nodealeph/peer/mergealeph/peer/nodealeph/peer/pushaleph/peer/util Classes aleph/peer/datastore~Datastorealeph/peer/db~StatementDBaleph/peer/identity~PrivateSigningKeyaleph/peer/identity~PublicSigningKeyaleph/peer/identity~PublisherIdaleph/peer/libp2p_node~P2PNodealeph/peer/node~MediachainNode Module: aleph/peer/util Helpers for peer-to-peer communication between nodes. Methods &lt;inner&gt; expandStatement(stmt, dataObjects) Convert a Statement into it's &quot;expanded&quot; form, so that it contains the data objects it links to. Parameters: Name Type Description stmt Statement A Statement with object references dataObjects Array.&lt;DataObjectMsg&gt; an array of decoded DataObject protobuf messages, as delivered by the /mediachain/node/data protocol. Returns: The expanded Statement. This will be a new object, with ExpandedSimpleStatmentBody objects replacing any SimpleStatementBody objects in the original. Type Statement &lt;inner&gt; lookupResponseToPeerInfo(resp) Convert a decoded LookupPeerResponse object into a libp2p PeerInfo object Parameters: Name Type Description resp a LookupPeerResponse protobuf, decoded into a POJO Returns: a libp2p PeerInfo object, or null if lookup failed &lt;inner&gt; peerInfoProtoMarshal(peerInfo) Convert a libp2p PeerInfo object into a PeerInfo protobuf message POJO Parameters: Name Type Description peerInfo a libp2p PeerInfo Returns: a POJO that's encodable to a PeerInfo protobuf message &lt;inner&gt; peerInfoProtoUnmarshal(pbPeer) Convert a decoded PeerInfo protobuf message into a libp2p PeerInfo object Parameters: Name Type Description pbPeer a PeerInfo protobuf message, decoded into a POJO Returns: a libp2p PeerInfo object Type PeerInfo &lt;inner&gt; protoStreamDecode(codec) A through-stream that accepts size-prefixed encoded protobufs, decodes with the given decoder function, and emits the decoded POJOs. Parameters: Name Type Description codec a protocol-buffers schema, containing a decode function Returns: a through-stream function that can be wired into a pull-stream pipeline &lt;inner&gt; protoStreamEncode(codec) A through stream that accepts POJOs and encodes them with the given protocol-buffers schema Parameters: Name Type Description codec a protocol-buffers schema, containing an encode function Returns: a pull-stream through function that will output encoded protos, prefixed with thier varint-encoded size &lt;inner&gt; pullRepeatedly(value, interval) A pull-stream source that supplies value repeatedly, waiting at least interval milliseconds between pulls. Parameters: Name Type Default Description value whatever you want to send interval 1000 milliseconds to wait between providing value to consumers Returns: a pull-stream source &lt;inner&gt; pullToPromise(streams) Like a standard pull-stream pull, but returns a Promise that will contain the final value. Use when you want a single value out of a stream, not for long-lived connections, etc. Parameters: Name Type Argument Description streams &lt;repeatable&gt; a pull-stream pipeline of source + through streams. Do not include a sink, since we're draining to Promise.resolve Returns: a promise that will resolve to the first value that reaches the end of the pipeline. Type Promise &lt;inner&gt; resultStreamThrough() A pull-stream through stream that will end the stream when it receives a StreamEnd message, and end the stream with an Error object if it receives a StreamError message. Without this, you need to explicitly pull.take(n) from the result stream, or it will never terminate. × Search results Close Documentation generated by JSDoc 3.4.3 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
